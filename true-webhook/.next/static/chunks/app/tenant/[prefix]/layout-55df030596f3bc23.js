(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{4913:(e,t,a)=>{Promise.resolve().then(a.bind(a,4785))},4785:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),n=a(2115),r=a(6046),l=a(8173),o=a.n(l);function i(e){let{children:t}=e,a=(0,r.useRouter)(),l=(0,r.usePathname)(),i=(0,r.useParams)().prefix,[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(""),[m,f]=(0,n.useState)(!0),v=[{href:"/tenant/".concat(i,"/dashboard"),label:"แดชบอร์ด",icon:"\uD83D\uDCCA"},{href:"/tenant/".concat(i,"/accounts"),label:"จัดการบัญชี",icon:"\uD83D\uDCB3"},{href:"/tenant/".concat(i,"/settings"),label:"ตั้งค่า",icon:"⚙️"}];return((0,n.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e){a.push("/master/login");return}t&&d(JSON.parse(t)),fetch("/api/tenant/".concat(i,"/stats"),{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.json()).then(e=>{e.ok&&h(e.data.network.name),f(!1)}).catch(()=>f(!1))},[a,i]),m)?(0,s.jsx)("div",{className:"loading",style:{minHeight:"100vh",alignItems:"center"},children:(0,s.jsx)("div",{className:"spinner"})}):(0,s.jsxs)("div",{className:"layout",children:[(0,s.jsxs)("aside",{className:"sidebar",children:[(0,s.jsxs)("div",{className:"sidebar-logo",children:["\uD83C\uDFEA ",u||i]}),(0,s.jsx)("nav",{style:{flex:1},children:v.map(e=>(0,s.jsxs)(o(),{href:e.href,className:"nav-item ".concat(l===e.href?"active":""),children:[(0,s.jsx)("span",{children:e.icon}),(0,s.jsx)("span",{children:e.label})]},e.href))}),(0,s.jsxs)("div",{style:{borderTop:"1px solid var(--border)",paddingTop:16},children:[(0,s.jsxs)("div",{style:{padding:"0 16px",marginBottom:16},children:[(0,s.jsx)("div",{style:{fontSize:14,fontWeight:500},children:(null==c?void 0:c.displayName)||(null==c?void 0:c.email)}),(0,s.jsx)("div",{style:{fontSize:12,color:"var(--text-muted)"},children:null==c?void 0:c.role})]}),(null==c?void 0:c.role)==="MASTER"&&(0,s.jsx)(o(),{href:"/master/dashboard",className:"btn btn-secondary",style:{width:"100%",marginBottom:8},children:"← กลับ Master"}),(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a.push("/master/login")},className:"btn btn-secondary",style:{width:"100%"},children:"ออกจากระบบ"})]})]}),(0,s.jsx)("main",{className:"main-content",children:t})]})}},6046:(e,t,a)=>{"use strict";var s=a(6658);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[173,441,517,358],()=>t(4913)),_N_E=e.O()}]);