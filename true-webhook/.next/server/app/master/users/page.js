(()=>{var e={};e.id=986,e.ids=[986],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},1979:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d});var t=r(260),a=r(8203),n=r(5155),o=r.n(n),l=r(7292),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(s,i);let d=["",{children:["master",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3038)),"C:\\xampp\\htdocs\\True_webhook\\true-webhook\\app\\master\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2350)),"C:\\xampp\\htdocs\\True_webhook\\true-webhook\\app\\master\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9611)),"C:\\xampp\\htdocs\\True_webhook\\true-webhook\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\xampp\\htdocs\\True_webhook\\true-webhook\\app\\master\\users\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/master/users/page",pathname:"/master/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},565:()=>{},2421:()=>{},929:(e,s,r)=>{Promise.resolve().then(r.bind(r,2350))},7377:(e,s,r)=>{Promise.resolve().then(r.bind(r,1170))},3130:(e,s,r)=>{Promise.resolve().then(r.bind(r,3038))},2882:(e,s,r)=>{Promise.resolve().then(r.bind(r,8330))},7969:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},7297:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,7174,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},1170:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d});var t=r(5512),a=r(8009),n=r(9334),o=r(8531),l=r.n(o);let i=[{href:"/master/dashboard",label:"แดชบอร์ด",icon:"\uD83D\uDCCA"},{href:"/master/networks",label:"จัดการเครือข่าย",icon:"\uD83C\uDF10"},{href:"/master/users",label:"จัดการผู้ใช้",icon:"\uD83D\uDC65"},{href:"/master/settings",label:"ตั้งค่า",icon:"⚙️"}];function d({children:e}){let s=(0,n.useRouter)(),r=(0,n.usePathname)(),[o,d]=(0,a.useState)(null),[c,m]=(0,a.useState)(!0);return"/master/login"===r?(0,t.jsx)(t.Fragment,{children:e}):c?(0,t.jsx)("div",{className:"loading",style:{minHeight:"100vh",alignItems:"center"},children:(0,t.jsx)("div",{className:"spinner"})}):(0,t.jsxs)("div",{className:"layout",children:[(0,t.jsxs)("aside",{className:"sidebar",children:[(0,t.jsx)("div",{className:"sidebar-logo",children:"\uD83D\uDD10 Master Panel"}),(0,t.jsx)("nav",{style:{flex:1},children:i.map(e=>(0,t.jsxs)(l(),{href:e.href,className:`nav-item ${r===e.href?"active":""}`,children:[(0,t.jsx)("span",{children:e.icon}),(0,t.jsx)("span",{children:e.label})]},e.href))}),(0,t.jsxs)("div",{style:{borderTop:"1px solid var(--border)",paddingTop:16},children:[(0,t.jsxs)("div",{style:{padding:"0 16px",marginBottom:16},children:[(0,t.jsx)("div",{style:{fontSize:14,fontWeight:500},children:o?.displayName||o?.email}),(0,t.jsx)("div",{style:{fontSize:12,color:"var(--text-muted)"},children:o?.role})]}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s.push("/master/login")},className:"btn btn-secondary",style:{width:"100%"},children:"ออกจากระบบ"})]})]}),(0,t.jsx)("main",{className:"main-content",children:e})]})}},8330:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n});var t=r(5512),a=r(8009);function n(){let[e,s]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0),[i,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(null),[h,p]=(0,a.useState)({email:"",password:"",displayName:"",role:"NETWORK_USER",networkId:""}),u=async()=>{let[e,r]=await Promise.all([fetch("/api/master/users",{headers:{Authorization:"Bearer "}}),fetch("/api/master/networks",{headers:{Authorization:"Bearer "}})]),t=await e.json(),a=await r.json();t.ok&&s(t.data),a.ok&&n(a.data),l(!1)},x=async e=>{e.preventDefault();let s=c?`/api/master/users/${c}`:"/api/master/users",r=c?"PUT":"POST",t=c&&!h.password?{displayName:h.displayName,role:h.role,networkId:h.networkId||null}:{...h,networkId:h.networkId||null};await fetch(s,{method:r,headers:{"Content-Type":"application/json",Authorization:"Bearer "},body:JSON.stringify(t)}),d(!1),m(null),p({email:"",password:"",displayName:"",role:"NETWORK_USER",networkId:""}),u()},b=e=>{p({email:e.email,password:"",displayName:e.displayName||"",role:e.role,networkId:e.network?.id||""}),m(e.id),d(!0)},v=async e=>{confirm("ยืนยันการลบผู้ใช้?")&&(await fetch(`/api/master/users/${e}`,{method:"DELETE",headers:{Authorization:"Bearer "}}),u())};return o?(0,t.jsx)("div",{className:"loading",children:(0,t.jsx)("div",{className:"spinner"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"page-header",children:[(0,t.jsx)("h1",{className:"page-title",children:"จัดการผู้ใช้"}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:()=>{p({email:"",password:"",displayName:"",role:"NETWORK_USER",networkId:""}),m(null),d(!0)},children:"+ เพิ่มผู้ใช้"})]}),(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"อีเมล"}),(0,t.jsx)("th",{children:"ชื่อ"}),(0,t.jsx)("th",{children:"บทบาท"}),(0,t.jsx)("th",{children:"เครือข่าย"}),(0,t.jsx)("th",{children:"จัดการ"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.email}),(0,t.jsx)("td",{children:e.displayName||"-"}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:`badge ${"MASTER"===e.role?"badge-warning":"badge-success"}`,children:e.role})}),(0,t.jsx)("td",{children:e.network?.name||"-"}),(0,t.jsxs)("td",{style:{display:"flex",gap:8},children:[(0,t.jsx)("button",{className:"btn btn-secondary",style:{padding:"8px 12px"},onClick:()=>b(e),children:"แก้ไข"}),(0,t.jsx)("button",{className:"btn btn-danger",style:{padding:"8px 12px"},onClick:()=>v(e.id),children:"ลบ"})]})]},e.id))})]})}),i&&(0,t.jsx)("div",{className:"modal-overlay",onClick:()=>d(!1),children:(0,t.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h2",{className:"modal-title",children:c?"แก้ไขผู้ใช้":"เพิ่มผู้ใช้"}),(0,t.jsxs)("form",{onSubmit:x,children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"อีเมล"}),(0,t.jsx)("input",{type:"email",className:"form-input",value:h.email,onChange:e=>p({...h,email:e.target.value}),required:!0,disabled:!!c})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{className:"form-label",children:["รหัสผ่าน ",c&&"(เว้นว่างหากไม่ต้องการเปลี่ยน)"]}),(0,t.jsx)("input",{type:"password",className:"form-input",value:h.password,onChange:e=>p({...h,password:e.target.value}),minLength:c?0:6,required:!c})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"ชื่อแสดง"}),(0,t.jsx)("input",{type:"text",className:"form-input",value:h.displayName,onChange:e=>p({...h,displayName:e.target.value})})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"บทบาท"}),(0,t.jsxs)("select",{className:"form-input",value:h.role,onChange:e=>p({...h,role:e.target.value}),children:[(0,t.jsx)("option",{value:"MASTER",children:"MASTER"}),(0,t.jsx)("option",{value:"NETWORK_ADMIN",children:"NETWORK_ADMIN"}),(0,t.jsx)("option",{value:"NETWORK_USER",children:"NETWORK_USER"})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"เครือข่าย"}),(0,t.jsxs)("select",{className:"form-input",value:h.networkId,onChange:e=>p({...h,networkId:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"-- ไม่มี --"}),r.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"modal-actions",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"ยกเลิก"}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",children:c?"บันทึก":"เพิ่ม"})]})]})]})})]})}},9611:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n,metadata:()=>a});var t=r(2740);r(2704);let a={title:"True Webhook Monitor",description:"TrueWallet Balance Monitoring System"};function n({children:e}){return(0,t.jsxs)("html",{lang:"th",children:[(0,t.jsx)("head",{children:(0,t.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap",rel:"stylesheet"})}),(0,t.jsx)("body",{children:e})]})}},2350:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\xampp\\\\htdocs\\\\True_webhook\\\\true-webhook\\\\app\\\\master\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\htdocs\\True_webhook\\true-webhook\\app\\master\\layout.tsx","default")},3038:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\xampp\\\\htdocs\\\\True_webhook\\\\true-webhook\\\\app\\\\master\\\\users\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\htdocs\\True_webhook\\true-webhook\\app\\master\\users\\page.tsx","default")},2704:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[403,730],()=>r(1979));module.exports=t})();